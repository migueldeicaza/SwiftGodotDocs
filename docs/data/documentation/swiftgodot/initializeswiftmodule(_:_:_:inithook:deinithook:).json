{"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"initializeSwiftModule","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"s:s13OpaquePointerV","kind":"typeIdentifier","text":"OpaquePointer"},{"text":", ","kind":"text"},{"preciseIdentifier":"s:s13OpaquePointerV","text":"OpaquePointer","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"OpaquePointer","preciseIdentifier":"s:s13OpaquePointerV"},{"kind":"text","text":", "},{"text":"initHook","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"GDExtension","kind":"typeIdentifier","preciseIdentifier":"s:10SwiftGodot11GDExtensionC"},{"text":".","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:10SwiftGodot11GDExtensionC19InitializationLevelO","text":"InitializationLevel"},{"text":") -> (), ","kind":"text"},{"text":"deInitHook","kind":"externalParam"},{"kind":"text","text":": ("},{"text":"GDExtension","kind":"typeIdentifier","preciseIdentifier":"s:10SwiftGodot11GDExtensionC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"InitializationLevel","preciseIdentifier":"s:10SwiftGodot11GDExtensionC19InitializationLevelO"},{"text":") -> ())","kind":"text"}],"symbolKind":"func","externalID":"s:10SwiftGodot010initializeA6Module___8initHook06deInitF0ys13OpaquePointerV_A2FyAA11GDExtensionC19InitializationLevelOcyAJctF","roleHeading":"Function","role":"symbol","title":"initializeSwiftModule(_:_:_:initHook:deInitHook:)","modules":[{"name":"SwiftGodot"}]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/swiftgodot\/initializeswiftmodule(_:_:_:inithook:deinithook:)"]}],"hierarchy":{"paths":[["doc:\/\/SwiftGodot\/documentation\/SwiftGodot"]]},"primaryContentSections":[{"declarations":[{"platforms":["macOS"],"tokens":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"initializeSwiftModule"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"_"},{"text":" ","kind":"text"},{"text":"godotGetProcAddrPtr","kind":"internalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s13OpaquePointerV","text":"OpaquePointer"},{"kind":"text","text":", "},{"text":"_","kind":"externalParam"},{"kind":"text","text":" "},{"kind":"internalParam","text":"libraryPtr"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"OpaquePointer","preciseIdentifier":"s:s13OpaquePointerV"},{"text":", ","kind":"text"},{"text":"_","kind":"externalParam"},{"kind":"text","text":" "},{"kind":"internalParam","text":"extensionPtr"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s13OpaquePointerV","text":"OpaquePointer"},{"text":", ","kind":"text"},{"text":"initHook","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"keyword","text":"@escaping"},{"text":" (","kind":"text"},{"identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/GDExtension","preciseIdentifier":"s:10SwiftGodot11GDExtensionC","text":"GDExtension","kind":"typeIdentifier"},{"text":".","kind":"text"},{"preciseIdentifier":"s:10SwiftGodot11GDExtensionC19InitializationLevelO","text":"InitializationLevel","identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/GDExtension\/InitializationLevel","kind":"typeIdentifier"},{"kind":"text","text":") -> (), "},{"kind":"externalParam","text":"deInitHook"},{"kind":"text","text":": "},{"text":"@escaping","kind":"keyword"},{"text":" (","kind":"text"},{"identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/GDExtension","preciseIdentifier":"s:10SwiftGodot11GDExtensionC","text":"GDExtension","kind":"typeIdentifier"},{"text":".","kind":"text"},{"identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/GDExtension\/InitializationLevel","text":"InitializationLevel","kind":"typeIdentifier","preciseIdentifier":"s:10SwiftGodot11GDExtensionC19InitializationLevelO"},{"text":") -> ())","kind":"text"}],"languages":["swift"]}],"kind":"declarations"},{"content":[{"text":"Discussion","type":"heading","anchor":"discussion","level":2},{"type":"paragraph","inlineContent":[{"text":"Call this function from your declared Swift entry point passing the three","type":"text"},{"type":"text","text":" "},{"type":"text","text":"pointers that you receive from Godot and passing a method that will"},{"type":"text","text":" "},{"text":"be invoked during the various stages of the initialization.","type":"text"}]},{"inlineContent":[{"type":"text","text":"This routine takes OpaquePointers to help you simplify the declaration of"},{"type":"text","text":" "},{"type":"text","text":"your Swift entry point, which can look like this:"}],"type":"paragraph"},{"code":["@cdecl(\"swift_entry_point\")","public func swift_entry_point (i: OpaquePointer?, l: OpaquePointer?, e: OpaquePointer?) -> UInt8 {","    guard let iface, let lib, let ext else {","        return 0","    }","    initializeSwiftModule (iface, lib, ext, initHook: myInit, deInitHook: myDeinit)","    return 1","}","","func myInit (level: GDExtension.InitializationLevel) {","   if level == .scene {","      registerType (MySpinningCube.self)","   }","}","","func myDeInit (level: GDExtension.InitializationLevel) {","    if level == .scene {","        print (\"Deinitialized\")","    }","}"],"syntax":"swift","type":"codeListing"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"godotGetProcAddrPtr: the first parameter you got on your entry point, it points to the API in Godot to request pointers to the engine functions."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"libraryPtr: the second parameter you entry point gets, it is of type GDExtensionClassLibraryPtr"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"extensionPtr: the third parameter you get, it is of type GDExtensionInitialization and it is filled with our callbacks"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"initHook: this method is invoked repeatedly during the various stages of the extension"},{"text":" ","type":"text"},{"type":"text","text":"initialization"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"deInitHook: this method is invoked repeatedly when various stages of the extension are wrapped up"}]}]}],"type":"unorderedList"}],"kind":"content"}],"identifier":{"url":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/initializeSwiftModule(_:_:_:initHook:deInitHook:)","interfaceLanguage":"swift"},"abstract":[{"text":"For use in extensions created for a Godot project","type":"text"}],"kind":"symbol","sections":[],"references":{"doc://SwiftGodot/documentation/SwiftGodot":{"kind":"symbol","url":"\/documentation\/swiftgodot","abstract":[{"type":"text","text":"Framework to write Godot Game Extensions using the Swift Programming Language."}],"role":"collection","title":"SwiftGodot","type":"topic","identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot"},"doc://SwiftGodot/documentation/SwiftGodot/initializeSwiftModule(_:_:_:initHook:deInitHook:)":{"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"initializeSwiftModule","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","text":"OpaquePointer","preciseIdentifier":"s:s13OpaquePointerV"},{"kind":"text","text":", "},{"preciseIdentifier":"s:s13OpaquePointerV","text":"OpaquePointer","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:s13OpaquePointerV","text":"OpaquePointer"},{"text":", ","kind":"text"},{"text":"initHook","kind":"externalParam"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"GDExtension","preciseIdentifier":"s:10SwiftGodot11GDExtensionC"},{"text":".","kind":"text"},{"preciseIdentifier":"s:10SwiftGodot11GDExtensionC19InitializationLevelO","kind":"typeIdentifier","text":"InitializationLevel"},{"kind":"text","text":") -> (), "},{"text":"deInitHook","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"GDExtension","preciseIdentifier":"s:10SwiftGodot11GDExtensionC","kind":"typeIdentifier"},{"kind":"text","text":"."},{"text":"InitializationLevel","preciseIdentifier":"s:10SwiftGodot11GDExtensionC19InitializationLevelO","kind":"typeIdentifier"},{"kind":"text","text":") -> ())"}],"url":"\/documentation\/swiftgodot\/initializeswiftmodule(_:_:_:inithook:deinithook:)","identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/initializeSwiftModule(_:_:_:initHook:deInitHook:)","title":"initializeSwiftModule(_:_:_:initHook:deInitHook:)","abstract":[{"text":"For use in extensions created for a Godot project","type":"text"}],"type":"topic","kind":"symbol"},"doc://SwiftGodot/documentation/SwiftGodot/GDExtension/InitializationLevel":{"identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/GDExtension\/InitializationLevel","type":"topic","abstract":[],"role":"symbol","kind":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"InitializationLevel"}],"navigatorTitle":[{"text":"InitializationLevel","kind":"identifier"}],"url":"\/documentation\/swiftgodot\/gdextension\/initializationlevel","title":"GDExtension.InitializationLevel"},"doc://SwiftGodot/documentation/SwiftGodot/GDExtension":{"identifier":"doc:\/\/SwiftGodot\/documentation\/SwiftGodot\/GDExtension","type":"topic","abstract":[{"text":"A native library for GDExtension.","type":"text"}],"role":"symbol","kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"GDExtension"}],"navigatorTitle":[{"text":"GDExtension","kind":"identifier"}],"url":"\/documentation\/swiftgodot\/gdextension","title":"GDExtension"}}}